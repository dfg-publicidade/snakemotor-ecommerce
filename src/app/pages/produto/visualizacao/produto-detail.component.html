<nav class="breadcrumb">
    <div class="container">
        <ul *ngIf="produtoOpcao">
            <li><a href="#">Home</a></li>
            <li class="separator">/</li>
            <li><a [routerLink]="[url]">Produtos</a></li>
            <!-- 
            <li class="separator">/</li>
            <li><a href="#">Capacetes</a></li>
             -->
            <li class="separator">/</li>
            <li><a class="active">{{produtoOpcao.produto.nome}}</a></li>
        </ul>
    </div>
</nav>
<section>
    <div class="container" *ngIf="produtoOpcao">
        <div class="produto">
            <div class="imagem">
                <doe-gallery [items]="produtoOpcao.imagens" thumbsOrientation="left" [thumbsAutoScroll]="true"></doe-gallery>
            </div>
            <div class="info">
                <div class="descricao">
                    <h3>{{produtoOpcao.produto.nome}}</h3>
                    <span class="avaliacao">
                        <i class="far fa-star pe-1"></i>
                        <i class="far fa-star pe-1"></i>
                        <i class="far fa-star pe-1"></i>
                        <i class="far fa-star pe-1"></i>
                        <i class="far fa-star"></i>
                    </span>
                    <p>{{produtoOpcao.produto.descricaoCurta}}</p>
                </div>
                <div class="preco">
                    <!-- PRECO VALOR PADRÃO RISCADO, POIS EXISTE VALOR PROMOCIONAL -->
                    <p class="valor-normal" [ngClass]="{empty: !produtoOpcao.precoPromocional}">{{produtoOpcao.precoPromocional ? produtoOpcao.precoVenda : '&nbsp;'}}</p>

                    <!-- PRECO VALOR PROMOCIONAL -->
                    <p class="valor-vigente" *ngIf="produtoOpcao.precoPromocional">{{produtoOpcao.precoPromocional}}</p>
                    <p class="valor-parcelado" *ngIf="produtoOpcao.precoPromocional && produtoOpcao.precoPromocionalParcelado">{{produtoOpcao.precoPromocionalParcelado}}</p>
                    <span class="tag lancamento" *ngIf="produtoOpcao.produto.lancamento">Lançamento</span>
                    <span class="tag exclusivo" *ngIf="produtoOpcao.produto.exclusivoSite">Exclusivo no site</span>
                    <span class="tag frete-gratis" *ngIf="produtoOpcao.produto.freteGratis">Frete Grátis</span>

                    <!-- PRECO VALOR PADRÃO -->
                    <p class="valor-vigente" *ngIf="!produtoOpcao.precoPromocional">{{produtoOpcao.precoVenda}}</p>
                    <p class="valor-parcelado" *ngIf="!produtoOpcao.precoPromocional && produtoOpcao.precoVendaParcelado">{{produtoOpcao.precoVendaParcelado}}</p>
                </div>
                <form class="variacoes" [formGroup]="formVariacao">
                    <ng-container *ngFor="let variacao of produtoOpcao.produto.variacoes">
                        <div class="cor" *ngIf="variacao.permalink === 'cor'">
                            <label>Cor</label>
                            <div class="itens">
                                <!-- loading -->
                                <a *ngFor="let item of [1,2,3]" [hidden]="!variacao.loadingVariacaoOpcaoService">
                                    <div class="item loading skeleton-box"></div>
                                </a>
                                <a [routerLink]="[url, produtoOpcao.produto.permalink]" [queryParams]="{op: pOpcao.id}" *ngFor="let pOpcao of variacao.produtoOpcoes">
                                    <div class="item" [ngClass]="{active: produtoOpcao.id === pOpcao.id || produtoOpcao[variacao.permalink].id === pOpcao[variacao.permalink].id}" [ngStyle]="{'background-image': 'url(' + pOpcao.imagem + ')'}"></div>
                                </a>
                            </div>
                        </div>
                    </ng-container>
                    <ng-container *ngFor="let variacao of produtoOpcao.produto.variacoes; let i = index">
                        <div class="tamanho" *ngIf="variacao.permalink !== 'cor'">
                            <label>{{variacao.nome}}</label>
                            <ng-select [multiple]="false" [formControlName]="variacao.permalink" placeholder="Selecione" [loading]="variacao.loadingVariacaoOpcaoService" loadingText="Carregando..." (change)="trocarProdutoOpcao($event, variacao.permalink, i)">
                                <ng-option [value]="pOpcao[variacao.permalink].id" *ngFor="let pOpcao of variacao.produtoOpcoes">{{pOpcao[variacao.permalink].nome}}</ng-option>
                            </ng-select>
                        </div>
                    </ng-container>
                </form>
                <button type="button" class="custom buy">
                    <i class="fas fa-shopping-cart"></i>
                    Comprar
                </button>
            </div>
        </div>
        <div class="produto-extra-info">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" id="tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#descricao" type="button" role="tab" aria-controls="descricao" aria-selected="true">Descrição</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#caracteristicas" type="button" role="tab" aria-controls="caracteristicas" aria-selected="false">Características</button>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div class="tab-pane active" id="descricao" role="tabpanel" aria-labelledby="home-tab">
                    <div *ngIf="produtoOpcao.produto.descricao" [innerHtml]="produtoOpcao.produto.descricao | sanitizeHtml"></div>
                    <p *ngIf="!produtoOpcao.produto.descricao">Nenhuma descrição disponível</p>
                </div>
                <div class="tab-pane" id="caracteristicas" role="tabpanel" aria-labelledby="profile-tab">
                    <div *ngIf="produtoOpcao.produto.caracteristicas" [innerHtml]="produtoOpcao.produto.caracteristicas | sanitizeHtml"></div>
                    <p *ngIf="!produtoOpcao.produto.caracteristicas">Nenhuma característica disponível</p>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="outros-produtos">
    <div class="container">
        <h1>Você também pode se <strong>interessar</strong> por</h1>
        <div class="produtos">
            <app-produto-componente [item]="produto" *ngFor="let produto of produtosPorCategoria"></app-produto-componente>
        </div>
    </div>
</section>