<nav class="breadcrumb">
    <div class="container">
        <ul>
            <li><a href="#">Home</a></li>
            <li class="separator">/</li>
            <li><a href="#">Produtos</a></li>
        </ul>
    </div>
</nav>
<section class="principal">
    <div class="container">
        <div class="catalogo">
            <!-- FILTROS -->
            <div class="box-filtro">
                <form *ngIf="opcoesFiltro">
                    <!-- FILTRO POR PREÇO -->
                    <div class="filtro">
                        <p class="titulo">Preço</p>
                        <div>
                            <div class="precos">
                                <ngx-slider [(value)]="minValue" [(highValue)]="maxValue" [options]="options" (userChangeEnd)="setFilterPreco()"></ngx-slider>
                            </div>
                        </div>
                    </div>

                    <!-- FILTRO POR VARIAÇÕES -->
                    <div class="filtro" [hidden]="filtro[1].length === 0" *ngFor="let filtro of opcoesFiltro; let i = index">
                        <p class="titulo">{{getNomeVariacao(i)}}</p>
                        <div *ngIf="filtro[0] !== 'cor'">
                            <div class="form-check" *ngFor="let item of filtro[1]">
                                <input type="checkbox" class="form-check-input" id="filter_{{filtro[0]}}_{{item.id}}" [value]="item.id" (change)="setFilterVariacao(filtro[0])" [checked]="possuiFiltro(filtro[0], item.id) || filtro[1].length === 1">
                                <label class="form-check-label">
                                    {{item.nome}}
                                </label>
                            </div>
                        </div>

                        <!-- FILTRO POR COR -->
                        <div *ngIf="filtro[0] === 'cor'">
                            <div class="cores">
                                <div class="box-cor" *ngFor="let item of filtro[1]">
                                    <div class="cor" [ngClass]="{active: possuiFiltro(filtro[0], item.id) || filtro[1].length === 2}" id="filter_{{filtro[0]}}_{{item.id}}" (click)="setFilterVariacao(filtro[0], item.id)">
                                        <span class="cor" [ngClass]="{full: !item.valor2}" [ngStyle]="{'background-color': item.valor}"></span>
                                        <span *ngIf="item.valor2" class="cor" [ngStyle]="{'background-color': item.valor2}"></span>
                                    </div>
                                    <span>{{item.nome}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- LISTA DE PRODUTOS -->
            <div class="box-produtos">
                <h3>
                    Capacetes
                    <ng-container *ngFor="let filtro of filtrosSelecionados">
                        <span *ngIf="filtro && filtro[1].nome">
                            {{filtro[1].nome}}
                            <span class="badge bg-secondary" (click)="removerFiltroSelecionado(filtro[0])">
                                <i class="fas fa-times"></i>
                            </span>
                        </span>
                    </ng-container>
                </h3>
                <div class="info">
                    <span *ngIf="total && total > 0">{{total}} produto{{total > 1 ? 's' : ''}}</span>
                    <div class="ordenacao">
                        <ng-select [multiple]="false" placeholder="Ordenar" (change)="setOrder($event)">
                            <ng-option [value]="'preco:asc'">Menor preço</ng-option>
                            <ng-option [value]="'preco:desc'">Maior preço</ng-option>
                        </ng-select>
                    </div>
                </div>
                <div class="produtos">
                    <app-produto-componente [item]="produto" *ngFor="let produto of produtoOpcoes"></app-produto-componente>
                </div>
            </div>
        </div>
    </div>
</section>